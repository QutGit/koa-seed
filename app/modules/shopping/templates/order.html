{% set lightbg = true; %}
{% set title = "订单详情"; %}
{% extends './modules/common/templates/layout.html' %}

{% block style %}
  <link rel="stylesheet" href="{{ shost }}/mobile/css/shopping.css" />
{% endblock %}

{% block content %}
  <div class="order">
    <header class="bar fixed">
      {{ macro.iconBack('/shopping/orders') }}
      <h1>{{ title }}</h1>
    </header>
    <section class="has-header has-footer">
      <div class="list">
        <div class="info small">
          <p>订单号：{{ order.code }}</p>
          <p>下单时间：{{ order.createAt|date('Y-m-d h:m:s') }}</p>
          <p>订单状态：<span class="text-warning">{{ order.status|order }}</span></p>
        </div>
        <div class="info small">
          <p>联系人：{{ order.addressName }}</p>
          <p>联系电话：{{ order.addressPhone }}</p>
          <p>收货地址：{{ order.paddressName }}</p>
        </div>
        {% for goods in order.list %}
          <a class="item item-thumbnail" href="/shopping/details/{{ goods.id }}">
            <div class="thumbnail">
              <img src="{{ goods.img }}" />
            </div>
            <div class="information">
              <h3 class="ellipsis">{{ goods.publishName }}</h3>
              <div class="price">
                <span class="text-danger">{{ goods.price|currency }} x {{ goods.count }}</span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </section>
    
    {% if order.status == 1 || order.status == 6 %}
      <footer class="bar fixed">
        <div class="charge">
          <div class="pull-left total">
            <span class="small pull-left">
              总价:<i class="text-danger">{{ order.total|currency }}</i><br />
              实付:<i class="text-danger">{{ order.totalRealpay|currency }}</i>
            </span>
          </div>
          <div class="pull-right">
            <button class="button button-warning">去支付</button>
          </div>
        </div>
      </footer>
    {% else %}
      <footer class="bar fixed">
        <footer class="bar fixed">
        <div class="charge">
          <div class="pull-left total">
            <span class="small pull-left">
              总价:<i class="text-danger">{{ order.total|currency }}</i><br />
              实付:<i class="text-danger">{{ order.totalRealpay|currency }}</i>
            </span>
          </div>
          <div class="pull-right">
            <button class="button button-default">删除订单</button>
          </div>
        </div>
      </footer>
      </footer>
    {% endif %}
  </div>
{% endblock %}

{% block script %}
  <script src="{{ shost }}/mobile/js/shopping.js"></script>
{% endblock %}